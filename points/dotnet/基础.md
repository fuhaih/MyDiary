>字符串常驻池

```csharp
string str = "abc";
string str = "ab" + "c";//这里会被优化，最终都是abc
string str = string.Intern("abc");
```
这三种方式生成的字符串对象都是在字符串常驻池中的，其中第二种是经过编译器优化，优化后代码和第一种是一样的

```csharp
string str6 = new String("abc");
```
这种方式就是从常驻池中找`"abc"`值作为入参，生成一个新的字符串对象

```csharp
string str1 = "abc";
string str2 = "abc";
Console.WriteLine($"str1 ReferenceEquals str2 {Object.ReferenceEquals(str1, str2)}");//true
//这两个str1 str2都是从常量池里创建的
string str3 = "abc";
string str4 = "ab"+"c";//这里会被优化，最终都是abc
Console.WriteLine($"str3 ReferenceEquals str4 {Object.ReferenceEquals(str3, str4)}");//true
string str5 = "abc";
string ab = "ab";
string str6 = ab + "c";//这里是对比str4
Console.WriteLine($"str5 ReferenceEquals str6 {Object.ReferenceEquals(str5, str6)}");//false
string str7 = "abc";
string str8 = new String("abc");
Console.WriteLine($"str7 ReferenceEquals str8 {Object.ReferenceEquals(str7, str8)}");//false
string str9 = "abc";
string str10 = string.Intern("abc");
Console.WriteLine($"str9 ReferenceEquals str10 {Object.ReferenceEquals(str9, str10)}");//true
```

输出结果
```
str1 ReferenceEquals str2 True
str3 ReferenceEquals str4 True
str5 ReferenceEquals str6 False
str7 ReferenceEquals str8 False
str9 ReferenceEquals str10 True
```

`IsInterned` 方法可以判定字符串的值是否已经存在于常驻池中

```csharp
string internValue = new StringBuilder().Append("a").Append("bc").ToString();
Console.WriteLine(string.IsInterned(internValue)!= null);//false
```
常量池是在程序刚运行时候就会把常量初始化进去的，上述代码中用到的常量有`a` 和`bc`，所以常驻池里应该是会有这两个常量
但是没有`abc`常量

```csharp
string internValue = new StringBuilder().Append("a").Append("bc").ToString();
Console.WriteLine(string.IsInterned(internValue)!= null);//true
string str0 = new String("abc");
```
这段代码中就是打印`true`,因为后面代码中有一段使用到了常量`abc`，也就是`string str0 = new String("abc");`代码段
所以在程序初始化时，常驻池已经把`abc`常量添加进去了，所以`IsInterned`方法能从常驻池中找到和`internValue`变量值相等的常驻池对象
