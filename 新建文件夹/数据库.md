> 连接字符串修改

可以使用`SqlConnectionStringBuilder`

```csharp
SqlConnectionStringBuilder builder = new SqlConnectionStringBuilder(Configuration.GetConnectionString("Default"));
builder.TrustServerCertificate = true;
string connectString = builder.ToString();
```

>Microsoft.Data.SqlClient包问题

版本4.0之后，加密配置(Encrypt)默认是打开的,可以连接字符串中配置加密为`Encrypt=false` 或者是`TrustServerCertificate=True`

## ef core

### 迁移

```
Add-migration -Context xxxContext -outputDir /Migrations
Remove-Migration -detailed 
Update-Database -Migration AddColumn_PP
Script-Migration -detailed
```

### enum

枚举类型使用字符串来存储

```csharp
public class Equipment
{
    [Column(TypeName="nvarchar(128)")]
    public EquipmentType Type{get;set;}
}
```
### 并发控制
EF的并发控制可以使用`ConcurrentToken`和`RowVersion`进行并发控制

目前来看，配置并发控制之后，并没有生成迁移，这两个并发控制的实现原理是如何的

可能是在更新的时候做了其他判断
```sql
update xxx set xxx=xxx where Id=@id and RowVersion=@version
```