>身份证校验

```csharp
/// <summary>
/// 是否是身份证号
/// </summary>
/// <param name="value"></param>
/// <returns></returns>
public static bool IsIDCard(this string value)
{
    if (value.Trim().Length == 15)
    {
        Regex regex = new Regex(@"^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$");
        var match = regex.Match(value.Trim());
        return match.Success;
    }
    else if (value.Trim().Length == 18)
    {
        Regex regex = new Regex(@"^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}(\d|X)$");
        var match = regex.Match(value.Trim());
        return match.Success;
    }
    else {
        return false;
    }
}

/// <summary>
/// 身份证号输入校验
/// </summary>
public class IDCardAttribute : ValidationAttribute
{
    public override bool IsValid(object value)
    {
        return value.ToString().IsIDCard();
    }
}

/// <summary>
/// 身份证
/// </summary>
[Required]
[IDCard(ErrorMessage ="身份证号异常")]
public string IdentityCard { get; set; }

```
我国自1999年实施公民身份号码制度以来，许多公民身份号码末位为“X”的公民，由于不明白“X”的含义，要求给予更换，产生了不必要的误会。目前我国公民身份证号码由18位数字组成：前6位为地址码，第7至14位为出生日期码，第15至17位为顺序码，第18位为校验码。检验码分别是“0、1、2、……10”共11个数字，当检验码为“10”时，为了保证公民身份证号码18位，所以用“X”表示。虽然校验码为“X”不能更换，但若需全用数字表示，只需将18位公民身份号码转换成15位居民身份证号码，去掉第7至8位和最后1位3个数码。

当今的身份证号码有15位和18位之分。1985年我国实行居民身份证制度，当时签发的身份证号码是15位的，1999年签发的身份证由于年份的扩展(由两位变为四位)和末尾加了效验码，就成了18位。这两种身份证号码将在相当长的一段时期内共存。

2005年各地启动身份证换证工作，第二代身份证号码是18位的。一代身份证如果是1999年前签发的，号码为15位，1999年后签发的，号码为18位。

两种身份证号码的含义如下：

18位的身份证号码如：130429####%%%%0078

1~6位为地区代码，其中1、2位数为各省级政府的代码，3、4位数为地、市级政府的代码，5、6位数为县、区级政府代码。如13(河北省)04(邯郸市)29(永年县)

7~14位为出生年月日

15~17位为顺序号，是县、区级政府所辖派出所的分配码，每个派出所分配码为10个连续号码，例如“000-009”或“060-069”，其中单数为男性分配码，双数为女性分配码，如遇同年同月同日有两人以上时顺延第二、第三、第四、第五个分配码。如：007的就是个男生而且和他同年月日生的男生至少有两个他们的后四位是001*和003*

18位为效验位(识别码)，通过复杂公式算出，普遍采用计算机自动生成。是前面17位的一种检验代码，如果你改变了前面某个数字而后面的效验代码不响应改变就会被计算软件判断为非法身份证号码。X也是效验代码的一中

15位的身份证号码：

(1)1~6位为地区代码

(2)7~8位为出生年份(2位)，9~10位为出生月份，11~12位为出生日期

(3)第13~15位为顺序号，并能够判断性别，奇数为男，偶数为女。
