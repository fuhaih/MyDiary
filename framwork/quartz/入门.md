# 从配置文件中配置任务
```csharp

//3.0.7版本要使用xml进行配置的话，需要nuget安装Quartz.Plugins插件

NameValueCollection properties = new NameValueCollection();
properties["quartz.scheduler.instanceName"] = "XmlConfiguredInstance";

// set thread pool info
//3.0.7版本没有ThreadPool配置了，因为使用的是Task
properties["quartz.threadPool.type"] = "Quartz.Simpl.SimpleThreadPool, Quartz";
properties["quartz.threadPool.threadCount"] = "10";
properties["quartz.threadPool.threadPriority"] = "Normal";

// job initialization plugin handles our xml reading, without it defaults are used
//3.0.7版本因为是使用Quartz.Plugins插件，所以后面的Quartz更改为Quartz.Plugins
properties["quartz.plugin.xml.type"] = "Quartz.Plugin.Xml.XMLSchedulingDataProcessorPlugin, Quartz";
string filePath = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "quartz_jobs.xml");
properties["quartz.plugin.xml.fileNames"] = filePath;

ISchedulerFactory sf = new StdSchedulerFactory(properties);
IScheduler sched = sf.GetScheduler();
sched.Start();
```

# 手动创建任务

```csharp

ISchedulerFactory sf = new StdSchedulerFactory();
IScheduler sched = await sf.GetScheduler();
//创建作业
IJobDetail jobdetail = JobBuilder.Create<JobEntrance>()
                    .WithIdentity("jobname","jobgroup")
                    //.UsingJobData("ConnectString",district.ConnectString)
                    .Build();
//给作业中添加数据
jobdetail.JobDataMap.Put("JobInstance", item);
jobdetail.JobDataMap.Put("District", district);

//设置触发器
ICronTrigger trigger = (ICronTrigger)TriggerBuilder.Create()
                    .WithIdentity(string.Format("triggername","triggergroup")
                    .WithCronSchedule(item.CronExpression)
                    .Build();
DateTimeOffset ft = await sched.ScheduleJob(jobdetail, trigger);
await sched.Start();
```