<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
    <title>rain</title>

    <style>
      /* body { background: #eee url(https://ww2.sinaimg.cn/large/bea70753gw1f1dtrt7tn5j21hc0xcjz5.jpg); background-size: cover; } */
      body { background: #eee; background-size: cover; }
      canvas { position: absolute; z-index: 10; top: 0; left: 0; opacity: 0.5; }
    </style>
</head>

<body>
  <canvas id="snow">你的浏览器太旧,不支持canvas</canvas>
  <script>
    $(function () {
    var W = $(window).width(),
        H = $(window).height(),
        x2 = -15, len = 30, count = 100;
    var canvas = document.getElementById("snow");
    canvas.width = W;
    canvas.height = H;
    var ctx = canvas.getContext('2d');

    setInterval(clearCanvas,100);
    function clearCanvas() {
        ctx.clearRect(0, 0, W, H);
        draws();
    };

    function draw(x, y) {
        //canvas写渐变：createLinearGradient（startX,startY,endX,endY）
        var grd = ctx.createLinearGradient(x, y, x + x2, y + len);
        grd.addColorStop(0, "rgba(0,0,0,0)");
        grd.addColorStop(0.5, "rgba(105,105,105,1)");
        grd.addColorStop(1, "rgba(255,255,255,1)");
        ctx.strokeStyle = grd;

        ctx.beginPath();
        ctx.moveTo(x, y);
        ctx.lineTo(x + x2, y + len);
        ctx.lineWidth = 2;
        ctx.stroke();
        ctx.closePath();
    };
    function draws() {
        for (var i = 1; i <= count; i++) {
            console.log(i)
            draw(Math.random() * W, Math.random() * H);
        }
    };
});
  </script>
</div>
</body>
</html>